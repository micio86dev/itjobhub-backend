
export type SupportedLanguage = 'it' | 'en' | 'es' | 'de' | 'fr';

const translations: Record<SupportedLanguage, Record<string, string>> = {
    it: {
        'auth.invalid_credentials': 'Email o password non validi',
        'auth.unauthorized': 'Non autorizzato',
        'validation.error': 'Errore di validazione',
        'validation.message_too_short': 'Il messaggio deve contenere almeno 10 caratteri',
        'auth.login_successful': 'Login effettuato con successo',
        'auth.logout_success': 'Logout effettuato con successo',
        'auth.logout_failed': 'Logout fallito',
        'auth.refresh_failed': 'Refresh token non valido',
        'auth.refresh_success': 'Token aggiornato con successo',
        'common.unknown_error': 'Errore sconosciuto',
        'error.not_found': 'Non trovato',
        'error.server_error': 'Errore del server',
        'email.subject.general_contact': 'Contatto Generale',
        'email.subject.error_report': 'Segnalazione Errore',
        'email.subject.participation_request': 'Richiesta Partecipazione Sviluppo',
        'email.subject.other_request': 'Altra Richiesta',
        'contact.name': 'Nome',
        'contact.email': 'Email',
        'contact.type': 'Tipo',
        'contact.message': 'Messaggio',
        'contact.type.general': 'Generale',
        'contact.type.error': 'Errore',
        'contact.type.participation': 'Partecipazione',
        'contact.type.other': 'Altro',
        'contact.success_message': 'Messaggio inviato con successo!',
        'contact.error_message': 'Errore durante l\'invio del messaggio. Riprova più tardi.',
        'contact.reply_sent': 'Risposta inviata con successo!',
        'contact.deleted': 'Messaggio eliminato con successo!',
    },
    en: {
        'auth.invalid_credentials': 'Invalid credentials',
        'auth.unauthorized': 'Unauthorized',
        'validation.error': 'Validation Error',
        'validation.message_too_short': 'Message must be at least 10 characters long',
        'auth.login_successful': 'Login successful',
        'auth.logout_success': 'Logged out successfully',
        'auth.logout_failed': 'Failed to logout',
        'auth.refresh_failed': 'Refresh token required',
        'auth.refresh_success': 'Token refreshed successfully',
        'common.unknown_error': 'Unknown error',
        'error.not_found': 'Not found',
        'error.server_error': 'Server error',
        'email.subject.general_contact': 'General Contact',
        'email.subject.error_report': 'Error Report',
        'email.subject.participation_request': 'Development Participation Request',
        'email.subject.other_request': 'Other Request',
        'contact.name': 'Name',
        'contact.email': 'Email',
        'contact.type': 'Type',
        'contact.message': 'Message',
        'contact.type.general': 'General',
        'contact.type.error': 'Error',
        'contact.type.participation': 'Participation',
        'contact.type.other': 'Other',
        'contact.success_message': 'Message sent successfully!',
        'contact.error_message': 'Error sending message. Please try again later.',
        'contact.reply_sent': 'Reply sent successfully!',
        'contact.deleted': 'Message deleted successfully!',
    },
    es: {
        'auth.invalid_credentials': 'Email o contraseña no válidos',
        'auth.unauthorized': 'No autorizado',
        'validation.error': 'Error de validación',
        'validation.message_too_short': 'El mensaje debe tener al menos 10 caracteres',
        'auth.login_successful': 'Inicio de sesión exitoso',
        'auth.logout_success': 'Sesión cerrada exitosamente',
        'auth.logout_failed': 'Error al cerrar sesión',
        'auth.refresh_failed': 'Token de actualización requerido',
        'auth.refresh_success': 'Token actualizado con éxito',
        'common.unknown_error': 'Error desconocido',
        'error.not_found': 'No encontrado',
        'error.server_error': 'Error del servidor',
        'email.subject.general_contact': 'Contacto General',
        'email.subject.error_report': 'Informe de Errores',
        'email.subject.participation_request': 'Solicitud de Participación en el Desarrollo',
        'email.subject.other_request': 'Otra Solicitud',
        'contact.name': 'Nombre',
        'contact.email': 'Email',
        'contact.type': 'Tipo',
        'contact.message': 'Mensaje',
        'contact.type.general': 'General',
        'contact.type.error': 'Error',
        'contact.type.participation': 'Participación',
        'contact.type.other': 'Otro',
        'contact.success_message': '¡Mensaje enviado con éxito!',
        'contact.error_message': 'Error al enviar el mensaje. Por favor, inténtelo de nuevo más tarde.',
        'contact.reply_sent': '¡Respuesta enviada con éxito!',
        'contact.deleted': '¡Mensaje eliminado con éxito!',
    },
    de: {
        'auth.invalid_credentials': 'Ungültige Anmeldeinformationen',
        'auth.unauthorized': 'Nicht autorisiert',
        'validation.error': 'Validierungsfehler',
        'validation.message_too_short': 'Die Nachricht muss mindestens 10 Zeichen lang sein',
        'auth.login_successful': 'Anmeldung erfolgreich',
        'auth.logout_success': 'Erfolgreich abgemeldet',
        'auth.logout_failed': 'Abmeldung fehlgeschlagen',
        'auth.refresh_failed': 'Aktualisierungs-Token erforderlich',
        'auth.refresh_success': 'Token erfolgreich aktualisiert',
        'common.unknown_error': 'Unbekannter Fehler',
        'error.not_found': 'Nicht gefunden',
        'error.server_error': 'Serverfehler',
        'email.subject.general_contact': 'Allgemeiner Kontakt',
        'email.subject.error_report': 'Fehlerbericht',
        'email.subject.participation_request': 'Anfrage zur Entwicklungsbeteiligung',
        'email.subject.other_request': 'Sonstige Anfrage',
        'contact.name': 'Name',
        'contact.email': 'Email',
        'contact.type': 'Typ',
        'contact.message': 'Nachricht',
        'contact.type.general': 'Allgemein',
        'contact.type.error': 'Fehler',
        'contact.type.participation': 'Beteiligung',
        'contact.type.other': 'Sonstiges',
        'contact.success_message': 'Nachricht erfolgreich gesendet!',
        'contact.error_message': 'Fehler beim Senden der Nachricht. Bitte versuchen Sie es später noch einmal.',
        'contact.reply_sent': 'Antwort erfolgreich gesendet!',
        'contact.deleted': 'Nachricht erfolgreich gelöscht!',
    },
    fr: {
        'auth.invalid_credentials': 'Identifiants invalides',
        'auth.unauthorized': 'Non autorisé',
        'validation.error': 'Erreur de validation',
        'validation.message_too_short': 'Le message doit contenir au moins 10 caractères',
        'auth.login_successful': 'Connexion réussie',
        'auth.logout_success': 'Déconnexion réussie',
        'auth.logout_failed': 'Échec de la déconnexion',
        'auth.refresh_failed': 'Jeton de rafraîchissement requis',
        'auth.refresh_success': 'Jeton mis à jour avec succès',
        'common.unknown_error': 'Erreur inconnue',
        'error.not_found': 'Non trouvé',
        'error.server_error': 'Erreur du serveur',
        'email.subject.general_contact': 'Contact Général',
        'email.subject.error_report': 'Rapport d\'Erreur',
        'email.subject.participation_request': 'Demande de Participation au Développement',
        'email.subject.other_request': 'Autre Demande',
        'contact.name': 'Nom',
        'contact.email': 'Email',
        'contact.type': 'Type',
        'contact.message': 'Message',
        'contact.type.general': 'Général',
        'contact.type.error': 'Erreur',
        'contact.type.participation': 'Participation',
        'contact.type.other': 'Autre',
        'contact.success_message': 'Message envoyé avec succès !',
        'contact.error_message': 'Erreur lors de l\'envoi du message. Veuillez réessayer plus tard.',
        'contact.reply_sent': 'Réponse envoyée avec succès !',
        'contact.deleted': 'Message supprimé avec succès !',
    },
};

export const translate = (key: string, lang: string = 'en'): string => {
    const language = (translations[lang as SupportedLanguage] ? lang : 'en') as SupportedLanguage;
    return translations[language][key] || key;
};




export const deriveLang = ({ request }: { request: Request }) => {
    const acceptLanguage = request.headers.get("accept-language");
    const lang = acceptLanguage ? acceptLanguage.split(",")[0].split("-")[0] : "en";
    return { lang };
};


